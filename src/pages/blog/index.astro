---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

import MainLayout from "../../layouts/MainLauout/MainLayout.astro";

type BlogPost = CollectionEntry<"blog">;

const posts: BlogPost[] = await getCollection(
  "blog",
  ({ data }: BlogPost) => !data.draft && data.lang === "es",
);
---

<MainLayout>
  <container class="p-5 gap-5 px-4 w-full lg:max-w-6xl lg:mx-auto">
    <h1 class="text-4xl font-bold mb-4">Last Posts!</h1>
    {
      posts.map((post) => (
        <article class="mb-8">
          <h2 class="text-2xl font-semibold mb-2">
            <a
              href={`/blog/${post.slug}`}
              class="text-blue-600 hover:underline"
            >
              {post.data.title}
            </a>
          </h2>
          <p class="text-gray-600 text-sm mb-4">
            {new Date(post.data.date).toLocaleDateString("en-ES", {
              year: "numeric",
              month: "long",
              day: "numeric",
            })}
          </p>
          <p class="text-gray-800">{post.data.description}</p>
        </article>
      ))
    }
  </container>
</MainLayout>
